let pokemonRepo=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=493",s=document.querySelector(".status");function i(){s.classList.remove("ready"),s.classList.add("loading"),s.innerHTML="Loading..."}function n(){s.classList.remove("loading"),s.classList.add("ready"),s.innerHTML="Ready"}function r(t){if("object"!=typeof t)return"Sorry, Pokemon must have an Id, Name, Type, and Height.";e.push(t)}function a(e){i();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.id=t.id,e.imageUrl=t.sprites.other.dream_world.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types}).catch(function(e){console.log(e)})}return{getAll:function(){return e},add:r,loadList:function(){return i(),fetch(t).then(function(e){return e.json()}).then(function(e){n(),e.results.forEach(function(e){r({name:e.name,detailsUrl:e.url})})}).catch(function(e){n(),console.log(e)})},loadDetails:a,addListItem:function(e){let t=document.querySelector(".pokemon-list"),s=document.createElement("button");s.innerText=e.name,s.classList.add("list-group-item"),s.classList.add("text-capitalize"),s.setAttribute("type","button"),s.classList.add("btn"),s.classList.add("btn-primary"),s.setAttribute("data-target","#pokemon-info"),s.setAttribute("data-toggle","modal"),s.setAttribute("data-bs-name",e.name),t.appendChild(s),s.addEventListener("click",function(){!function(e){a(e).then(function(){n(),function(e){$(".modal-header");let t=$(".modal-title"),s=$(".modal-body"),i=$("#pokemon-id");t.empty(),s.empty(),i.empty();let n=document.createElement("p");n.innerText=`ID: ${e.id}`;let r=document.createElement("img");r.setAttribute("src",e.imageUrl),r.classList.add("img-fluid"),r.classList.add("mb-2"),r.classList.add("pokepic");let a=document.createElement("p");a.innerText=`Height: ${e.height/.1} cm`;let c=document.createElement("p");c.innerText=`Weight: ${e.weight/10} kg`,t.append(e.name),s.append(n),s.append(r),s.append(a),s.append(c),e.types.forEach(function(e){let t=document.createElement("img");switch(t.classList.add("type"),e.type.name){case"normal":t.setAttribute("src","./img/Normal.svg");break;case"water":t.setAttribute("src","./img/Water.svg");break;case"electric":t.setAttribute("src","./img/Electric.svg");break;case"fighting":t.setAttribute("src","./img/Fight.svg");break;case"ground":t.setAttribute("src","./img/Ground.svg");break;case"psychic":t.setAttribute("src","./img/Psychic.svg");break;case"rock":t.setAttribute("src","./img/Rock.svg");break;case"dark":t.setAttribute("src","./img/Dark.svg");break;case"steel":t.setAttribute("src","./img/Steel.svg");break;case"fire":t.setAttribute("src","./img/Fire.svg");break;case"grass":t.setAttribute("src","./img/Grass.svg");break;case"ice":t.setAttribute("src","./img/Ice.svg");break;case"poison":t.setAttribute("src","./img/Poison.svg");break;case"flying":t.setAttribute("src","./img/Flying.svg");break;case"bug":t.setAttribute("src","./img/Bug.svg");break;case"ghost":t.setAttribute("src","./img/Ghost.svg");break;case"dragon":t.setAttribute("src","./img/Dragon.svg");break;case"fairy":t.setAttribute("src","./img/Fairy.svg")}s.append(t)})}(e)})}(e)})}}}();function searchPokemon(){let e=document.querySelector("#pokemon-search").value.toLowerCase(),t=document.querySelectorAll(".list-group-item");for(let s=0;s<t.length;s++){t[s].innerText.toLowerCase().indexOf(e)>-1?t[s].style.display="":t[s].style.display="none"}}pokemonRepo.loadList().then(function(){pokemonRepo.getAll().forEach(function(e){pokemonRepo.addListItem(e)})}),window.addEventListener("keydown",function(e){"13"==e.keyCode&&e.preventDefault()});
